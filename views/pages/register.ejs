<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8" />
	<title>Social Scene</title>
	<link rel="stylesheet" href="./stylesheets/app.css">
</head>
<body>
	<div id="outerdiv">
		<header className="App-header" key="register_screen">
      <h1>SocialScene</h1>
      <div>
        <button id="currfile" disabled> Register </button>
        &nbsp;
        &nbsp;
        <button onclick="window.location.href='/login'"> Login </button>
      </div>
      &nbsp;
      <h2>Register</h2>

      <div class="alert" style ="display: <%= val %>">
        This email has been already registered
        <span class="closebtn"> x </span>
      </div>

      <form action="/register" method="post">
        <table>
          <tbody>
            <tr>
              <td>Enter your first name: &nbsp;</td>
              <td><input type="text" name="fname" required /> </td>
            </tr>
            <tr>
              <td>Enter your last name: &nbsp;</td>
              <td><input type="text" name="lname" required /> </td>
            </tr>
            <tr>
              <td>Enter your email: &nbsp;</td>
              <td><input type="email" id="email" name="email" required /> </td>
            </tr>
            <tr>
              <td>Enter your password: &nbsp;</td>
              <td><input type="password" id="password" name="password" value="" required /> </td>
            </tr>
            <tr>
              <td>Confirm your password: &nbsp;</td>
              <td><input type="password" id="pass_confirm" name="pass_confirm" value="" required onkeyup='check();' /> </td>
            </tr>
          </tbody>
        </table>
        <span id="chkermsg" style="display:none;font-size:calc(4px + 2vmin)" ></span>
        <br/>
        <br/>
        <button id="submitbutton"> Submit </button>
      </form>
    </header>
	</div>
</body>
</html>

<script>
var close = document.getElementsByClassName("closebtn");
var i;

for (i = 0; i < close.length; i++) {
  close[i].onclick = function(){
    var div = this.parentElement;
    div.style.opacity = "0";
    setTimeout(function(){ div.style.display = "none"; }, 600);
  }
}
</script>

<script>
  var check = function() {
    if ( document.getElementById("password").value == document.getElementById('pass_confirm').value ) {
      // document.getElementById("chkermsg").style.display = 'none';
      document.getElementById("submitbutton").disabled = false;
      document.getElementById("chkermsg").style.color = 'green';
      document.getElementById("chkermsg").innerHTML = 'The passwords match &nbsp; ┬─┬ ノ( ゜-゜ノ) ';
      document.getElementById("password").style.backgroundColor = 'lightgreen';
      document.getElementById("pass_confirm").style.backgroundColor = 'lightgreen';
    }
    else {
      document.getElementById("chkermsg").style.display = 'inline-block';
      document.getElementById("submitbutton").disabled = true;
      document.getElementById("chkermsg").style.color = 'red';
      document.getElementById("chkermsg").innerHTML = 'The passwords do not match (╯°□°）╯︵ ┻━┻ ';
      document.getElementById("password").style.backgroundColor = 'pink';
      document.getElementById("pass_confirm").style.backgroundColor = 'pink';
    }
  }
</script>