<!DOCTYPE html>
<html>
<head>
	<title>Results</title>
	<link rel="stylesheet" href="./stylesheets/app.css">
</head>
<body style="float: left;display: inline-block;">
	<%const base = 'https://image.tmdb.org/t/p/w154';%>
	<button onclick="window.location.href='/tmdb'">Back to Main </button>	<!-- button back to home -->
	<h1> Search Results</h1>
	<% if (total_results == 0){%>
		<p style="color: red">There are no results to display. Please try a different keyword </p>
	<%}else{%>
		<p>Now Displaying <span style="color: red;"><%=results.length%></span> Results.</p>
	<%};%>
	<!-- listing out the data -->
	<% var n = results.length;%>
	<% for (var i=0; i<n ; i++) { %>
	<div onclick='document.forms[<%=i%>].submit()' style=" display: inline-block;">
		<% r = results[i]; %>
		<%= r.title %><br>
		<%if(r.poster_path == null){%>
			<img src = '/noimg.jpg'>
		<%}else{%>
			<%var url = base + r.poster_path%>
			<img src= '<%=url%>'>
		<%};%>
		<!-- data to load a detailed page -->
		<form name='<%=r.id%>' method="post" action="/details">
			<input type="hidden" name="id" value="<%=r.id%>">
			<input type="hidden" name="title" value="<%=r.title%>">
			<input type="hidden" name="overview" value = "<%=r.overview%>">
		</form>
	</div>
	    <% }; %>
	<div style="margin-top: 10px;">
		<p>page <%=page%></p>
		<% if (results.length != 0){%>
		<table width="100%">
			<td>
				<form method="post">
					<input type="hidden" name="keyword_prev" value="<%=key%>">
					<input type="hidden" name="pg_prev" value="<%=page-1%>">
					<%if(page > 1){%>
						<button formaction="/prevmv">previous</button>
					<%};%>
				</form>
			</td>
			<td style="text-align: right;">
				<form method="post">
					<input type="hidden" name="keyword" value="<%=key%>">
					<input type="hidden" name="pg" value="<%=page+1%>">
					<%if(page < total_pages){%>
						<button formaction="/searchmv">next</button>
					<%};%>
				</form>
			</td>
		</table>
		<%};%>
	</div>
</body>
</html>

<script >
	function rate(id){
		console.log('you have clicked on movie',id);
		return
	};
</script>